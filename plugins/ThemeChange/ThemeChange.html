<div class="profile-heading-container">
    <div class="body">
        <strong class="profile-heading">Adjust the theme</strong>
        <p>Change between light and dark mode.</p>
        <br>
        <button onclick="toggle_mode()">Toggle mode</button>
    </div>
</div>
<div id="init-plugin">
    <script>
        Requests.fetchOperator('/plugin/ThemeChange', {
            method: 'GET'
        }).then(res => res.json()).then(config => {
            if(config.inverted){
                document.querySelector('body').classList.add('inverted');
            }
        });
    </script>
</div>
<script>
    function toggle_mode() {
        Requests.fetchOperator('/plugin/ThemeChange', {
            method: 'GET'
        }).then(res => res.json()).then(config => {
            let app = document.querySelector('body')
            config.inverted = !app.classList.contains("inverted");
            Requests.fetchOperator('/plugin/ThemeChange', {
                method: 'POST',
                body: JSON.stringify(config)
            }).then(() => {
                if (!app.classList.contains("inverted")) {
                    document.querySelector('body').classList.add('inverted');
                } else {
                    document.querySelector('body').classList.remove('inverted');
                }
            });
        });
    }
</script>
